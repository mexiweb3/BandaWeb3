<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ episode.description }}">
    <meta property="og:title" content="BandaWeb3 #{{ episode.number }} - {{ episode.title }}">
    <meta property="og:description" content="{{ episode.description }}">
    <meta property="og:image" content="{{ episode.flyer_url }}">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BandaWeb3">
    <title>BandaWeb3 #{{ episode.number }} - {{ episode.title }}</title>
    <link rel="stylesheet" href="../static/style.css">
    <link rel="icon" href="../static/favicon.ico">
</head>

<body>
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="logo">
                <span class="logo-text">BandaWeb3</span>
            </a>
            <div class="nav-links">
                <a href="../index.html">Todos los episodios</a>
                <a href="https://twitter.com/BandaWeb3" target="_blank">Twitter</a>
            </div>
        </div>
    </nav>

    <main class="episode-page">
        <div class="container">
            <!-- Episode Header -->
            <div class="episode-header">
                <div class="episode-number">#{{ episode.number }}</div>
                <h1 class="episode-title">{{ episode.title }}</h1>
                <div class="episode-meta">
                    <span class="meta-item">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        {{ episode.date }}
                    </span>
                    <span class="meta-item">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        {{ episode.duration }}
                    </span>
                    {% if episode.listeners %}
                    <span class="meta-item">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 00-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 010 7.75"></path>
                        </svg>
                        {{ episode.listeners }} oyentes
                    </span>
                    {% endif %}
                    {% if episode.status %}
                    <span class="status-badge {{ episode.status }}">
                        {{ episode.status|title }}
                    </span>
                    {% endif %}
                </div>
            </div>

            <!-- Flyer and Audio Player -->
            <div class="episode-content">
                <div class="content-grid">
                    <!-- Flyer -->
                    {% if episode.flyer_url %}
                    <div class="flyer-container">
                        <img src="{{ episode.flyer_url }}" alt="Flyer Episode {{ episode.number }}" class="flyer-image">
                    </div>
                    {% endif %}

                    <!-- Audio Player -->
                    <div class="audio-player-container">
                        <h2>Escuchar episodio</h2>
                        {% if episode.audio_url %}
                        <audio controls class="audio-player">
                            <source src="{{ episode.audio_url }}" type="audio/mpeg">
                            Tu navegador no soporta el elemento de audio.
                        </audio>
                        {% else %}
                        <div class="audio-placeholder">
                            <p>Audio próximamente disponible</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Description -->
                <div class="episode-description">
                    <h2>Sobre este episodio</h2>
                    <p>{{ episode.description }}</p>
                </div>

                <!-- Guests -->
                {% if episode.guests %}
                <div class="episode-guests">
                    <h2>Invitados</h2>
                    <ul class="guests-list">
                        {% for guest in episode.guests %}
                        <li class="guest-item">
                            {% if episode.guest_links and episode.guest_links[guest] %}
                            <a href="{{ episode.guest_links[guest] }}" target="_blank" class="guest-link">
                                {{ guest }}
                                <svg class="icon-tiny" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                            </a>
                            {% else %}
                            {{ guest }}
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <!-- Topics -->
                {% if episode.topics %}
                <div class="episode-topics">
                    <h2>Temas</h2>
                    <div class="topics-tags">
                        {% for topic in episode.topics %}
                        <span class="topic-tag">{{ topic }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- External Links -->
                {% if episode.space_url or episode.unlock_url or episode.opensea_url or episode.contract_url %}
                <div class="episode-links">
                    <h2>Enlaces</h2>
                    <div class="links-list">
                        {% if episode.space_url %}
                        <a href="{{ episode.space_url }}" target="_blank" class="btn btn-outline">
                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
                                </path>
                            </svg>
                            Space Original
                        </a>
                        {% endif %}

                        {% if episode.unlock_url %}
                        <a href="{{ episode.unlock_url }}" target="_blank" class="btn btn-outline">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0110 0v4"></path>
                            </svg>
                            Unlock Protocol
                        </a>
                        {% endif %}

                        {% if episode.opensea_url %}
                        <a href="{{ episode.opensea_url }}" target="_blank" class="btn btn-outline">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            OpenSea
                        </a>
                        {% endif %}

                        {% if episode.contract_url %}
                        <a href="{{ episode.contract_url }}" target="_blank" class="btn btn-outline">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="16 18 22 12 16 6"></polyline>
                                <polyline points="8 6 2 12 8 18"></polyline>
                            </svg>
                            Contrato
                        </a>
                        {% endif %}
                    </div>
                </div>
                {% endif %}

                <!-- Transcript -->
                {% if episode.transcript_available %}
                <div class="episode-transcript">
                    <h2>Transcripción</h2>
                    <a href="../transcripts/E{{ episode.number }}_transcript.txt" class="btn btn-secondary">
                        Ver transcripción completa
                    </a>
                </div>
                {% endif %}

                <!-- Share -->
                <div class="episode-share">
                    <h2>Compartir</h2>
                    <div class="share-buttons">
                        <a href="https://twitter.com/intent/tweet?text=Escuchando%20BandaWeb3%20%23{{ episode.number }}%20-%20{{ episode.title | urlencode }}&url={{ page_url }}"
                            target="_blank" class="share-btn twitter">
                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
                                </path>
                            </svg>
                            Twitter
                        </a>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ page_url }}" target="_blank"
                            class="share-btn linkedin">
                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z">
                                </path>
                                <circle cx="4" cy="4" r="2"></circle>
                            </svg>
                            LinkedIn
                        </a>
                        <button onclick="copyLink()" class="share-btn copy">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                            </svg>
                            Copiar link
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="episode-navigation">
                {% if prev_episode %}
                <a href="episode_{{ prev_episode.number }}.html" class="nav-btn prev">
                    <span class="nav-label">← Anterior</span>
                    <span class="nav-title">#{{ prev_episode.number }}: {{ prev_episode.title }}</span>
                </a>
                {% endif %}

                {% if next_episode %}
                <a href="episode_{{ next_episode.number }}.html" class="nav-btn next">
                    <span class="nav-label">Siguiente →</span>
                    <span class="nav-title">#{{ next_episode.number }}: {{ next_episode.title }}</span>
                </a>
                {% endif %}
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 BandaWeb3. Todos los derechos reservados.</p>
            <div class="footer-links">
                <a href="https://twitter.com/BandaWeb3" target="_blank">Twitter</a>
                <a href="../rss.xml">RSS</a>
            </div>
        </div>
    </footer>

    <script>
        function copyLink() {
            navigator.clipboard.writeText(window.location.href);
            alert('Link copiado al portapapeles!');
        }
    </script>
</body>

</html>