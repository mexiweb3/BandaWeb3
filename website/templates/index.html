<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Archivo completo de episodios de BandaWeb3 - Podcast sobre Web3, Blockchain y tecnología descentralizada en español">
    <meta property="og:title" content="BandaWeb3 - Archivo de Episodios">
    <meta property="og:description" content="Todos los episodios de BandaWeb3 podcast">
    <meta property="og:type" content="website">
    <title>BandaWeb3 - Archivo de Episodios</title>
    <link rel="stylesheet" href="static/style.css">
    <link rel="icon" href="static/favicon.ico">
</head>

<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <span class="logo-text">BandaWeb3</span>
            </a>
            <div class="nav-links">
                <a href="https://twitter.com/BandaWeb3" target="_blank">Twitter</a>
                <a href="rss.xml">RSS</a>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="container">
            <h1 class="hero-title">Archivo de Episodios</h1>
            <p class="hero-subtitle">Explora todos los episodios de BandaWeb3</p>
            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">{{ total_episodes }}</span>
                    <span class="stat-label">Episodios</span>
                </div>
                <div class="stat">
                    <span class="stat-number">{{ total_hours }}</span>
                    <span class="stat-label">Horas de contenido</span>
                </div>
            </div>
        </div>
    </header>

    <main class="episodes-list">
        <div class="container">
            <!-- Search and Filter -->
            <div class="controls">
                <input type="text" id="searchInput" class="search-input" placeholder="Buscar episodios...">
                <select id="sortSelect" class="sort-select">
                    <option value="newest">Más recientes</option>
                    <option value="oldest">Más antiguos</option>
                </select>
            </div>

            <!-- Episodes Grid -->
            <div class="episodes-grid" id="episodesGrid">
                {% for episode in episodes %}
                <article class="episode-card" data-title="{{ episode.title | lower }}"
                    data-topics="{{ episode.topics | join(',') | lower }}">
                    <a href="episodes/episode_{{ episode.number }}.html" class="card-link">
                        {% if episode.flyer_url %}
                        <div class="card-image">
                            <img src="{{ episode.flyer_url }}" alt="Episode {{ episode.number }}">
                            <div class="card-overlay">
                                <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                </svg>
                            </div>
                        </div>
                        {% else %}
                        <div class="card-image card-placeholder">
                            <div class="placeholder-content">
                                <span class="episode-number-large">#{{ episode.number }}</span>
                            </div>
                        </div>
                        {% endif %}

                        <div class="card-content">
                            <div class="card-header">
                                <span class="episode-number">#{{ episode.number }}</span>
                                <span class="episode-date">{{ episode.date }}</span>
                            </div>
                            <h2 class="card-title">{{ episode.title }}</h2>
                            <p class="card-description">{{ episode.description[:150] }}{% if episode.description|length
                                > 150 %}...{% endif %}</p>

                            {% if episode.topics %}
                            <div class="card-topics">
                                {% for topic in episode.topics[:3] %}
                                <span class="topic-tag-small">{{ topic }}</span>
                                {% endfor %}
                            </div>
                            {% endif %}

                            <div class="card-meta">
                                <span class="meta-item">
                                    <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    {{ episode.duration }}
                                </span>
                                {% if episode.guests %}
                                <span class="meta-item">
                                    <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"></path>
                                        <circle cx="9" cy="7" r="4"></circle>
                                        <path d="M23 21v-2a4 4 0 00-3-3.87"></path>
                                        <path d="M16 3.13a4 4 0 010 7.75"></path>
                                    </svg>
                                    {{ episode.guests|length }} invitado{% if episode.guests|length > 1 %}s{% endif %}
                                </span>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </article>
                {% endfor %}
            </div>

            <!-- No results message -->
            <div id="noResults" class="no-results" style="display: none;">
                <p>No se encontraron episodios</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 BandaWeb3. Todos los derechos reservados.</p>
            <div class="footer-links">
                <a href="https://twitter.com/BandaWeb3" target="_blank">Twitter</a>
                <a href="rss.xml">RSS</a>
            </div>
        </div>
    </footer>

    <script>
        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const sortSelect = document.getElementById('sortSelect');
        const episodesGrid = document.getElementById('episodesGrid');
        const noResults = document.getElementById('noResults');
        const cards = Array.from(document.querySelectorAll('.episode-card'));

        searchInput.addEventListener('input', filterEpisodes);
        sortSelect.addEventListener('change', sortEpisodes);

        function filterEpisodes() {
            const query = searchInput.value.toLowerCase();
            let visibleCount = 0;

            cards.forEach(card => {
                const title = card.dataset.title;
                const topics = card.dataset.topics;
                const matches = title.includes(query) || topics.includes(query);

                card.style.display = matches ? 'block' : 'none';
                if (matches) visibleCount++;
            });

            noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        }

        function sortEpisodes() {
            const sortValue = sortSelect.value;
            const sortedCards = cards.sort((a, b) => {
                const numA = parseInt(a.querySelector('.episode-number').textContent.replace('#', ''));
                const numB = parseInt(b.querySelector('.episode-number').textContent.replace('#', ''));
                return sortValue === 'newest' ? numB - numA : numA - numB;
            });

            sortedCards.forEach(card => episodesGrid.appendChild(card));
        }
    </script>
</body>

</html>